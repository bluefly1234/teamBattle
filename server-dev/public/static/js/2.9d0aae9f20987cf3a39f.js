webpackJsonp([2],{545:function(t,e,n){function a(t){return n(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var i={"./components/questions/edit/breakBrick.vue":626,"./components/questions/play/breakBrick.vue":629};a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id=545},548:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(139),r=n.n(a),i=n(206);e.default={name:"battle_over",props:["battle_over","myScore"],data:function(){return{}},computed:r()({},n.i(i.a)("student",["otherScore"]),{battleResult:function(){return this.myScore===this.otherScore?"平局！":this.myScore>this.otherScore?"YOU WIN!":"YOU LOST!"}}),methods:r()({},n.i(i.c)(["backToHome"]))}},549:function(t,e,n){e=t.exports=n(533)(!1),e.push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},550:function(t,e,n){var a=n(549);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(534)("9092e174",a,!0)},551:function(t,e,n){n(550);var a=n(205)(n(548),n(552),"data-v-2de87492",null);t.exports=a.exports},552:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"对战结束",visible:t.battle_over,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,center:""},on:{"update:visible":function(e){t.battle_over=e}}},[n("h1",{staticClass:"text-center"},[t._v(t._s(t.battleResult))]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.backToHome("student")}}},[t._v("确 定")])],1)])},staticRenderFns:[]}},563:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(207),r=n.n(a);e.default={data:function(){return{formData:{title:"",speed:10,density:3,total_time:0,answerTags:{list:[1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79],inputVisible:!1,inputValue:""},interferenceTags:{list:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,48,44,46,50,52,54,56,58,60,62,64,66,68,70,72],inputVisible:!1,inputValue:""}},allTagList:[]}},mounted:function(){this.upsetTaglist()},methods:{submitForm:function(t){this.upsetTaglist()},selectDensity:function(t){this.formData.density=t,this.upsetTaglist()},upsetTaglist:function(){function t(t,e){return Math.round(100*(Math.random()*(t-e)+e))/100}var e=[],n=[];for(var a in this.formData.answerTags.list)e.push({title:this.formData.answerTags.list[a],prop:!0});for(var i in this.formData.interferenceTags.list)n.push({title:this.formData.interferenceTags.list[i],prop:!1});var s=e.concat(n);s.sort(function(){return.5-Math.random()});var o=Number(this.formData.speed)+5,l=this.formData.speed-5,c=1,u=1,b=[0,1,2,4,5,6,7],p=1;b.sort(function(){return.5-Math.random()});for(var d=0,f=0;f<s.length;f++)f&&(f+1)%this.formData.density==0&&(u=parseInt((f+1)/this.formData.density*(Number(this.formData.speed)/1.5)),d=0,b.sort(function(){return.5-Math.random()})),p=u+t(1,-1)>p?u+t(1,-1):p,s[f]={id:c++,posTimes:b[d++],margin:t(20,-20),delay:u+t(1,-1),speed:t(o,l),title:s[f].title,prop:s[f].prop};this.formData.total_time=Math.ceil(Number(this.formData.speed)+p),this.allTagList=s,console.log(r()(s))},deleteThisTag:function(t,e){this.formData[t].list.splice(this.formData[t].list.indexOf(e),1),this.upsetTaglist()},showTagInput:function(t){var e=this;this.formData[t].inputVisible=!0,this.$nextTick(function(n){e.$refs[t].$refs.input.focus()})},createNewTag:function(t){var e=this.formData[t].inputValue;e&&this.formData[t].list.push(e),this.formData[t].inputValue="",this.upsetTaglist()},recoverTagButton:function(t){this.createNewTag(t),this.formData[t].inputVisible=!1}}}},566:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(207),r=n.n(a),i=n(139),s=n.n(i),o=n(206),l=n(551),c=n.n(l);e.default={components:{battleOver:c.a},data:function(){return{bgBlur:"bgBlur",total_time:0,total_score:0,battle_time:{min:"00",sec:"00"},battle_progress:0,battle_progStatu:"success",battle_timer:null,battle_over:!1,battle_started:!1,ques_list:[],ques_title:""}},computed:s()({},n.i(o.a)("student",["matching","otherChecks","otherScore"]),n.i(o.b)("student",["allReadyStart"])),watch:{allReadyStart:function(t){this.battleStart()}},mounted:function(){var t=this;this.$http("GET",!1,"./static/dataJson/breakBrick.json",{},function(e){t.ques_list=e.list,t.ques_title=e.title,t.total_time=e.total_time,websocket.send(r()({type:"battle_isReady"})),t.otherIsReady&&t.battleStart()})},methods:{battleStart:function(){var t=this;this.bgBlur="",this.battle_started=!0;var e=this.total_time;this.battle_time=this.formatTime(e),this.battle_timer=setInterval(function(){e?(e--,t.battle_progress=100*(1-(e-1)/t.total_time),t.battle_time=t.formatTime(e),e/t.total_time>40&&e>10?t.battle_progStatu="":e<=10&&(t.battle_progStatu="exception")):(clearInterval(t.battle_timer),t.battleOver())},1e3)},formatTime:function(t){var e=parseInt(t%60),n=parseInt(t/60);return{min:n<10?"0"+n:n,sec:e<10?"0"+e:e}},battleOver:function(){this.battle_over=!0,this.bgBlur="bgBlur"},breakBrick:function(t,e){var n=this,a=this;this.$set(this.ques_list[t],"selected",!0),setTimeout(function(){a.$set(n.ques_list[t],"confirm",!0)},1e3),e?this.total_score++:this.total_score--,websocket.send(r()({type:"result",data:{userId:this.$store.state.userInfo.id,index:t,check:e,total_score:this.total_score}}))}}}},588:function(t,e,n){e=t.exports=n(533)(!1),e.push([t.i,'\n@charset "UTF-8";\nhtml {\n  background-color: #f4f4f4;\n}\n\n/* 对战面板 */\n.battle-panel.breakBrick {\n  border-radius: 5px;\n  border: 1px solid #ddd;\n  background-color: #fff;\n  max-width: 1200px;\n  margin: 20px auto 50px;\n  transition: filter .3s;\n}\n.battle-panel.breakBrick.bgBlur {\n    filter: blur(10px);\n}\n.battle-panel.breakBrick .battle-head {\n    position: relative;\n    line-height: 80px;\n    text-align: center;\n    font-size: 32px;\n    font-weight: bold;\n    color: #666;\n}\n.battle-panel.breakBrick .battle-head:before, .battle-panel.breakBrick .battle-head:after {\n      position: absolute;\n      bottom: 100%;\n      line-height: 50px;\n      font-size: 16px;\n      z-index: 10;\n      padding: 0 15px;\n}\n.battle-panel.breakBrick .battle-head:before {\n      content: attr(data-myname);\n      left: 0;\n}\n.battle-panel.breakBrick .battle-head:after {\n      content: attr(data-othername);\n      right: 0;\n}\n.battle-panel.breakBrick .battle-head .battle-score {\n      position: absolute;\n      top: 0;\n      line-height: 80px;\n      font-size: 28px;\n      padding: 0 15px;\n}\n.battle-panel.breakBrick .battle-head .battle-score.mine {\n        left: 0;\n}\n.battle-panel.breakBrick .battle-head .battle-score.other {\n        right: 0;\n}\n.battle-panel.breakBrick .battle-head .el-progress {\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      z-index: 1;\n}\n.battle-panel.breakBrick .battle-head .el-progress.noTransition .el-progress-bar__inner {\n        transition: none;\n}\n.battle-panel.breakBrick .battle-head .el-progress-bar__inner {\n      width: 0;\n      transition: width linear 1s;\n}\n.battle-panel.breakBrick .battle-head .el-progress-bar__outer, .battle-panel.breakBrick .battle-head .el-progress-bar__inner {\n      border-radius: 0;\n}\n.battle-panel.breakBrick .battle-content {\n    height: 600px;\n    background-color: #f2f2f2;\n    overflow: hidden;\n    padding: 0 30px;\n}\n.battle-panel.breakBrick .bricks-box {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n}\n.battle-panel.breakBrick .bricks-box li {\n      position: absolute;\n      bottom: 100%;\n      left: 0;\n      z-index: 100;\n      padding: 0 15px;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      width: 10%;\n      line-height: 44px;\n      background-color: #fff;\n      border-radius: 5px;\n      border: 1px solid #ddd;\n      font-size: 24px;\n      text-align: center;\n      cursor: pointer;\n      transition: transform 10s ease-in;\n}\n.battle-panel.breakBrick .bricks-box li.dropdown {\n        transform: translate3d(0, 650px, 0);\n}\n.battle-panel.breakBrick .bricks-box li.selected {\n        color: #fff;\n        transform: translate3d(0, 300px, 0);\n}\n.battle-panel.breakBrick .bricks-box li.selected.right {\n          background-color: #67c23a;\n          border-color: #67c23a;\n}\n.battle-panel.breakBrick .bricks-box li.selected.wrong {\n          background-color: #f56c6c;\n          border-color: #f56c6c;\n}\n',""])},592:function(t,e,n){e=t.exports=n(533)(!1),e.push([t.i,"\n.breakBrick .el-form-item__label {\n  font-size: 16px;\n}\n.breakBrick .el-form-item__content {\n  line-height: normal;\n}\n.breakBrick .tag-box .el-tag {\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n.breakBrick .tag-box .el-tag :last-child {\n    margin-right: 5px;\n}\n.breakBrick .tag-box .input-new-tag {\n  width: 95px;\n}\n",""])},593:function(t,e,n){e=t.exports=n(533)(!1),e.push([t.i,"\n.edit-container[data-v-4d05a398] {\n  width: 660px;\n  margin: 0 auto;\n}\n.edit-container .tag-box[data-v-4d05a398] {\n    padding: 10px 15px;\n    border-radius: 4px;\n    border: 1px solid #dcdfe6;\n}\n",""])},610:function(t,e,n){var a=n(588);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(534)("0ca035bb",a,!0)},614:function(t,e,n){var a=n(592);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(534)("94590bd4",a,!0)},615:function(t,e,n){var a=n(593);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(534)("1e275c92",a,!0)},626:function(t,e,n){n(615),n(614);var a=n(205)(n(563),n(648),"data-v-4d05a398",null);t.exports=a.exports},629:function(t,e,n){n(610);var a=n(205)(n(566),n(644),null,null);t.exports=a.exports},644:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.bgBlur},[n("h2",{staticClass:"text-center"},[t._v(t._s(t.ques_title))]),t._v(" "),n("div",{staticClass:"battle-panel breakBrick"},[n("div",{staticClass:"battle-head",attrs:{"data-myname":t.$store.state.userInfo.name,"data-othername":t.matching[0].name}},[n("div",{staticClass:"battle-score mine"},[t._v(t._s(t.total_score))]),t._v(" "),n("div",{staticClass:"battle-score other"},[t._v(t._s(t.otherScore))]),t._v(" "),t.battle_over?n("div",{staticClass:"over-title"},[t._v("对战结束")]):n("div",[t._v(t._s(t.battle_time.min)+" : "+t._s(t.battle_time.sec))]),t._v(" "),n("el-progress",{class:t.battle_progress>100?"noTransition":"",attrs:{"stroke-width":2,percentage:t.battle_progress>100?100:t.battle_progress,status:t.battle_progStatu,"show-text":!1}})],1),t._v(" "),n("div",{staticClass:"battle-content"},[n("ul",{staticClass:"bricks-box list-none"},t._l(t.ques_list,function(e,a){return e.confirm||t.otherChecks[a].confirm?t._e():n("v-touch",{key:e.id,class:(t.battle_started?"dropdown":"")+" "+(e.prop?"right":"wrong")+" "+(e.selected?"selected animated zoomOut":""),style:"margin-left:"+e.margin+"px;left:"+12*e.posTimes+"%;transition-duration: "+e.speed+"s;-webkit-transition-duration: "+e.speed+"s;transition-delay: "+e.delay+"s;-webkit-transition-delay: "+e.delay+"s;",attrs:{tag:"li"},on:{tap:function(n){t.breakBrick(a,e.prop)}}},[t._v("\n                    "+t._s(e.title)+"\n                ")])}))])]),t._v(" "),n("battle-over",{attrs:{battle_over:t.battle_over,myScore:t.total_score}})],1)},staticRenderFns:[]}},648:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit-container breakBrick noselect"},[n("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"正确答案"}},[n("div",{staticClass:"tag-box"},[t._l(t.formData.answerTags.list,function(e){return n("el-tag",{key:e,attrs:{closable:"","disable-transitions":!0,type:"success"},on:{close:function(n){t.deleteThisTag("answerTags",e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])}),t._v(" "),t.formData.answerTags.inputVisible?n("el-input",{ref:"answerTags",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(e){t.recoverTagButton("answerTags")}},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.createNewTag("answerTags")}},model:{value:t.formData.answerTags.inputValue,callback:function(e){t.$set(t.formData.answerTags,"inputValue",e)},expression:"formData.answerTags.inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){t.showTagInput("answerTags")}}},[t._v("\n                    + New Tag\n                ")])],2)]),t._v(" "),n("el-form-item",{attrs:{label:"混淆选项"}},[n("div",{staticClass:"tag-box"},[t._l(t.formData.interferenceTags.list,function(e){return n("el-tag",{key:e,attrs:{closable:"","disable-transitions":!0,type:"warning"},on:{close:function(n){t.deleteThisTag("interferenceTags",e)}}},[t._v("\n                    "+t._s(e)+"\n                ")])}),t._v(" "),t.formData.interferenceTags.inputVisible?n("el-input",{ref:"interferenceTags",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(e){t.recoverTagButton("interferenceTags")}},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.createNewTag("interferenceTags")}},model:{value:t.formData.interferenceTags.inputValue,callback:function(e){t.$set(t.formData.interferenceTags,"inputValue",e)},expression:"formData.interferenceTags.inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){t.showTagInput("interferenceTags")}}},[t._v("+\n                    New Tag\n                ")])],2)]),t._v(" "),n("el-form-item",{attrs:{label:"掉落速度"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:2},nativeOn:{keyup:function(e){t.upsetTaglist(e)}},model:{value:t.formData.speed,callback:function(e){t.$set(t.formData,"speed",e)},expression:"formData.speed"}},[n("template",{slot:"append"},[t._v("秒/每块")])],2)],1),t._v(" "),n("el-form-item",{attrs:{label:"掉落密度"}},[n("el-radio-group",{attrs:{size:"medium"},on:{change:t.selectDensity},model:{value:t.formData.density,callback:function(e){t.$set(t.formData,"density",e)},expression:"formData.density"}},[n("el-radio-button",{attrs:{label:"3"}},[t._v("稀疏")]),t._v(" "),n("el-radio-button",{attrs:{label:"5"}},[t._v("普通")]),t._v(" "),n("el-radio-button",{attrs:{label:"7"}},[t._v("密集")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"总时长"}},[n("h3",{staticStyle:{margin:"0","line-height":"40px"}},[t._v(t._s(t.formData.total_time)+"秒")])]),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm")}}},[t._v("立即创建")]),t._v(" "),n("el-button",[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}}});